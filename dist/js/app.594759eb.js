(()=>{"use strict";var e={512:(e,a,l)=>{var t=l(751),r=l(641),s=l(33),o=l(953);const i=l.p+"img/fu.94d7c1c3.png",n=l.p+"img/music.b21a476b.png",u=l.p+"media/music.20f36300.mp3";var c=l(37),p=l.n(c),v=l(809),d=l(694),f=l.n(d),m=l(249),b=l(224);const k={class:"image-cropper"},g={class:"cropper-container"},y={class:"cropper-buttons"},h=(0,r.pM)({__name:"ImageCropper",props:{visible:{type:Boolean},imageUrl:{}},emits:["update:visible","confirm"],setup(e,{emit:a}){const l=a,t=(0,o.KR)(),s=()=>{l("update:visible",!1)},i=()=>{t.value.getCropData((e=>{l("confirm",e),l("update:visible",!1)}))},n=e=>{};return(e,a)=>{const u=(0,r.g2)("van-button"),c=(0,r.g2)("van-popup");return(0,r.uX)(),(0,r.CE)("div",k,[(0,r.bF)(c,{show:e.visible,"onUpdate:show":a[0]||(a[0]=e=>l("update:visible",e)),position:"bottom",style:{height:"70%"}},{default:(0,r.k6)((()=>[(0,r.Lk)("div",g,[(0,r.bF)((0,o.R1)(b.Ay),{ref_key:"cropperRef",ref:t,img:e.imageUrl,outputSize:1,outputType:"png",info:!0,full:!0,canMove:!0,canMoveBox:!0,original:!1,autoCrop:!0,fixed:!0,fixedNumber:[1,1],centerBox:!0,onRealTime:n},null,8,["img"]),(0,r.Lk)("div",y,[(0,r.bF)(u,{type:"default",onClick:s},{default:(0,r.k6)((()=>a[1]||(a[1]=[(0,r.eW)("取消")]))),_:1}),(0,r.bF)(u,{type:"primary",onClick:i},{default:(0,r.k6)((()=>a[2]||(a[2]=[(0,r.eW)("确定")]))),_:1})])])])),_:1},8,["show"])])}}});var C=l(262);const _=(0,C.A)(h,[["__scopeId","data-v-9509fcea"]]),L=_,w={class:"avatar-maker"},R={class:"decoration"},x={class:"main-content"},F={class:"preview-area"},K=["src"],O=["src"],E={key:2,class:"placeholder"},U=["src"],X={class:"action-buttons"},j={class:"frame-selector"},W={class:"frames-grid"},I=["onClick"],M=["src"],z={class:"bottom-buttons"},A={class:"qr-container"},B="https://powerzzjohn.github.io/desktop-tutorial/",T=(0,r.pM)({__name:"AvatarMaker",setup(e){const a=(0,o.KR)([{url:l(491)},{url:l(0)},{url:l(713)},{url:l(622)},{url:l(615)},{url:l(532)}]),t=(0,o.KR)(0),c=(0,o.KR)(""),d=(0,o.KR)(""),b=(0,o.KR)(!1),k=(0,o.KR)(""),g=(0,o.KR)(),y=(0,o.KR)(),h=(0,o.KR)(),C=(0,o.KR)(!1),_=async()=>{try{const e=await wx.getUserInfo();c.value=e.avatarUrl}catch(e){(0,v.y8)("获取头像失败")}},T=()=>{g.value?.click()},P=e=>{const a=e.target.files?.[0];a&&(k.value=URL.createObjectURL(a),b.value=!0)},D=e=>{c.value=e,d.value=""},S=e=>{t.value=e,d.value=""},q=async()=>{if(y.value)try{const e=await f()(y.value,{useCORS:!0,backgroundColor:null}),a=await new Promise((a=>{e.toBlob((e=>{a(e)}),"image/png")}));(0,m.saveAs)(a,"新年头像.png"),(0,v.y8)("头像已保存")}catch(e){(0,v.y8)("生成失败，请重试")}},H=()=>{h.value&&(h.value.paused?(h.value.play(),C.value=!0):(h.value.pause(),C.value=!1))},N=(0,o.KR)(!1),Q=()=>{N.value=!0},V=()=>{history.back()};return(0,r.sV)((()=>{h.value?.play().then((()=>{C.value=!0})).catch((()=>{C.value=!1}))})),(0,r.hi)((()=>{h.value?.pause()})),(e,l)=>{const v=(0,r.g2)("van-icon"),f=(0,r.g2)("van-button"),m=(0,r.g2)("van-popup");return(0,r.uX)(),(0,r.CE)("div",w,[(0,r.Lk)("div",R,[l[2]||(l[2]=(0,r.Lk)("img",{src:i,class:"fu-icon"},null,-1)),(0,r.Lk)("div",{class:"music-control",onClick:H},[(0,r.Lk)("img",{src:n,class:(0,s.C4)({rotating:C.value})},null,2)])]),(0,r.Lk)("div",x,[(0,r.Lk)("div",F,[(0,r.Lk)("div",{class:"avatar-frame",ref_key:"avatarRef",ref:y},[d.value?((0,r.uX)(),(0,r.CE)("img",{key:0,src:d.value,class:"merged-avatar"},null,8,K)):c.value?((0,r.uX)(),(0,r.CE)("img",{key:1,src:c.value,class:"user-avatar"},null,8,O)):((0,r.uX)(),(0,r.CE)("div",E,[(0,r.bF)(v,{name:"photo",size:"40"}),l[3]||(l[3]=(0,r.Lk)("p",null,"请选择头像",-1))])),c.value?((0,r.uX)(),(0,r.CE)("img",{key:3,src:a.value[t.value].url,class:"frame-overlay"},null,8,U)):(0,r.Q3)("",!0)],512)]),(0,r.Lk)("div",X,[(0,r.bF)(f,{class:"action-btn",onClick:_},{default:(0,r.k6)((()=>l[4]||(l[4]=[(0,r.eW)("使用当前头像")]))),_:1}),(0,r.bF)(f,{class:"action-btn",onClick:T},{default:(0,r.k6)((()=>l[5]||(l[5]=[(0,r.eW)("上传照片或拍照")]))),_:1})]),(0,r.Lk)("div",j,[l[6]||(l[6]=(0,r.Lk)("div",{class:"title"},"选择你的头像框",-1)),(0,r.Lk)("div",W,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.value,((e,a)=>((0,r.uX)(),(0,r.CE)("div",{key:a,class:(0,s.C4)(["frame-item",{active:t.value===a}]),onClick:e=>S(a)},[(0,r.Lk)("img",{src:e.url},null,8,M)],10,I)))),128))])]),(0,r.Lk)("div",z,[(0,r.bF)(f,{class:"bottom-btn",onClick:V},{default:(0,r.k6)((()=>l[7]||(l[7]=[(0,r.eW)("返回")]))),_:1}),(0,r.bF)(f,{class:"bottom-btn",type:"primary",onClick:q,disabled:!c.value},{default:(0,r.k6)((()=>l[8]||(l[8]=[(0,r.eW)(" 生成新头像 ")]))),_:1},8,["disabled"]),(0,r.bF)(f,{class:"bottom-btn",type:"info",onClick:Q},{default:(0,r.k6)((()=>l[9]||(l[9]=[(0,r.eW)("分享链接")]))),_:1})]),(0,r.bF)(m,{show:N.value,"onUpdate:show":l[0]||(l[0]=e=>N.value=e),round:""},{default:(0,r.k6)((()=>[(0,r.Lk)("div",A,[l[10]||(l[10]=(0,r.Lk)("h3",null,"扫码访问",-1)),(0,r.bF)((0,o.R1)(p()),{value:B,size:200,level:"H"}),(0,r.Lk)("p",null,(0,s.v_)(B))])])),_:1},8,["show"])]),(0,r.Lk)("input",{type:"file",ref_key:"fileInput",ref:g,style:{display:"none"},accept:"image/*",onChange:P},null,544),(0,r.bF)(L,{visible:b.value,"onUpdate:visible":l[1]||(l[1]=e=>b.value=e),"image-url":k.value,onConfirm:D},null,8,["visible","image-url"]),(0,r.Lk)("audio",{ref_key:"audioRef",ref:h,loop:""},l[11]||(l[11]=[(0,r.Lk)("source",{src:u,type:"audio/mpeg"},null,-1)]),512)])}}}),P=(0,C.A)(T,[["__scopeId","data-v-5a9bd85e"]]),D=P,S=(0,r.pM)({__name:"App",setup(e){return(e,a)=>((0,r.uX)(),(0,r.Wv)(D))}}),q=S,H=q;var N=l(88),Q=l(750),V=l(626);l(979);const $=(0,t.Ef)(H);$.use(N.$n).use(Q.In).use(v.y8).use(V.zD),$.mount("#app")},491:(e,a,l)=>{e.exports=l.p+"img/frame1.541cba59.png"},0:(e,a,l)=>{e.exports=l.p+"img/frame2.0399396c.png"},713:(e,a,l)=>{e.exports=l.p+"img/frame3.4c0f5d26.png"},622:(e,a,l)=>{e.exports=l.p+"img/frame4.451a5c43.png"},615:(e,a,l)=>{e.exports=l.p+"img/frame5.3cb18f3a.png"},532:(e,a,l)=>{e.exports=l.p+"img/frame6.ad0451c4.png"}},a={};function l(t){var r=a[t];if(void 0!==r)return r.exports;var s=a[t]={exports:{}};return e[t].call(s.exports,s,s.exports,l),s.exports}l.m=e,(()=>{var e=[];l.O=(a,t,r,s)=>{if(!t){var o=1/0;for(c=0;c<e.length;c++){for(var[t,r,s]=e[c],i=!0,n=0;n<t.length;n++)(!1&s||o>=s)&&Object.keys(l.O).every((e=>l.O[e](t[n])))?t.splice(n--,1):(i=!1,s<o&&(o=s));if(i){e.splice(c--,1);var u=r();void 0!==u&&(a=u)}}return a}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[t,r,s]}})(),(()=>{l.n=e=>{var a=e&&e.__esModule?()=>e["default"]:()=>e;return l.d(a,{a}),a}})(),(()=>{l.d=(e,a)=>{for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}})(),(()=>{l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{l.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a)})(),(()=>{l.p="/"})(),(()=>{var e={524:0};l.O.j=a=>0===e[a];var a=(a,t)=>{var r,s,[o,i,n]=t,u=0;if(o.some((a=>0!==e[a]))){for(r in i)l.o(i,r)&&(l.m[r]=i[r]);if(n)var c=n(l)}for(a&&a(t);u<o.length;u++)s=o[u],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(c)},t=self["webpackChunk"]=self["webpackChunk"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var t=l.O(void 0,[504],(()=>l(512)));t=l.O(t)})();
//# sourceMappingURL=app.594759eb.js.map